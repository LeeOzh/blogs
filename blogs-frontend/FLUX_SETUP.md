# 🚀 Flux模型配置指南

## 关于Flux

Flux是Black Forest Labs开发的最先进的开源图像生成模型，具有以下特点：
- **极高的图像质量**：生成的图片非常逼真和细腻
- **快速生成**：FLUX.1-schnell版本只需4步推理
- **强大的文本理解**：能很好地理解复杂的提示词

## 🔧 配置步骤

### 1. 获取Hugging Face Token

1. 访问 [Hugging Face](https://huggingface.co/) 并注册/登录
2. 进入 [Settings > Access Tokens](https://huggingface.co/settings/tokens)
3. 点击 "New token"
4. **重要**: 选择 **"Write"** 权限（Flux模型需要写入权限）
5. 复制生成的token

### 2. 配置环境变量

在项目根目录的 `.env` 文件中添加：
```env
VITE_HUGGINGFACE_TOKEN=hf_your_token_here
```

### 3. 验证配置

1. 重启开发服务器：`npm run dev`
2. 访问 `/#/style-transfer`
3. 查看"调试面板"，点击"测试API连接"
4. 应该看到 "✅ Flux API测试成功！"

## ⚡ Flux模型参数

我们使用的优化参数：
- **guidance_scale**: 3.5 (Flux推荐的较低值)
- **num_inference_steps**: 4 (schnell版本的快速设置)
- **分辨率**: 1024x1024 (Flux的原生分辨率)

## 🎨 风格转换原理

由于Flux主要是文本到图像模型，我们通过以下方式实现风格转换：
1. **增强提示词**：结合用户选择的风格和原图描述
2. **风格关键词**：使用专门优化的风格描述词
3. **质量提升**：添加高质量、细节等关键词

## 🔍 常见问题

### Q: 为什么只用Flux不用其他模型？
A: Flux是目前最先进的开源模型，图像质量远超其他模型，值得专门优化。

### Q: 处理时间多长？
A: 通常30-120秒，取决于Hugging Face服务器负载。

### Q: 如何提高生成质量？
A: 
- 使用清晰的原图
- 选择合适的风格
- 确保网络连接稳定

### Q: 遇到"模型正在加载"怎么办？
A: 等待几分钟后重试，这是正常现象。

## 🚀 生产环境建议

对于生产环境，建议：
1. **使用Replicate**：更稳定的Flux服务
2. **添加缓存**：避免重复生成相同内容
3. **用户配额**：控制使用量和成本
4. **错误重试**：自动重试失败的请求

## 📊 成本估算

### Hugging Face (免费层)
- 1000次/月免费
- 超出后需要付费计划

### Replicate (推荐生产环境)
- 按使用量付费
- 约$0.003-0.01/次生成
- 更稳定的服务质量

## 🎯 优化建议

1. **提示词优化**：使用详细、具体的描述
2. **图片预处理**：上传前适当压缩
3. **批量处理**：一次处理多张图片
4. **结果缓存**：保存常用的生成结果

现在你的Flux AI图片风格转换功能已经准备就绪！🎉